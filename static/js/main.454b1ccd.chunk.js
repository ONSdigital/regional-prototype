(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{135:function(e,t,a){e.exports=a(251)},140:function(e,t,a){},142:function(e,t,a){},251:function(e,t,a){"use strict";a.r(t);var n=a(1),o=a.n(n),r=a(124),l=a.n(r),c=(a(140),a(21)),s=a(22),i=a(25),u=a(23),m=a(26),p=(a(142),a(261)),h=a(263),d=a(265);var v=function(){return o.a.createElement("div",{className:"wrapper"},o.a.createElement("div",{className:"header col-wrap"},o.a.createElement("div",{className:"col col--lg-one-third col--md-one-third"},o.a.createElement("a",{href:"/"},o.a.createElement("img",{className:"logo",src:"https://cdn.ons.gov.uk/assets/images/ons-logo/v2/ons-logo.svg",alt:"Office for National Statistics"}))),o.a.createElement("div",{className:"col col--lg-two-thirds col--md-two-thirds print--hide"},"\xa0"),o.a.createElement("div",{className:"secondary-nav col col--lg-two-thirds col--md-two-thirds print--hide"},o.a.createElement("ul",{className:"secondary-nav__list"},o.a.createElement("li",{className:"secondary-nav__item"},o.a.createElement("a",{className:"secondary-nav__link",href:"/methodology"},"Methodology")),o.a.createElement("li",{className:"secondary-nav__item"},o.a.createElement("a",{className:"secondary-nav__link",href:"/aboutus"},"About"))))))},f=a(85),y=a(125),g=a.n(y),E=a(256),b=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).updateQuery=function(e){a.setState({query:e})},a.state={query:"",compare:[]},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"handleAdd",value:function(e){this.setState({compare:[].concat(Object(f.a)(this.state.compare),[e.target.value])})}},{key:"handleRemove",value:function(e){var t=this;this.state.compare.map(function(a){return a===e.target.value?t.removeLA(e.target.value):null})}},{key:"removeLA",value:function(e){var t=Object(f.a)(this.state.compare),a=t.indexOf(e);-1!==a&&(t.splice(a,1),this.setState({compare:t}))}},{key:"addCode",value:function(e){for(var t in this.props.localAuthorities)if(this.props.localAuthorities[t].label===e)return this.props.localAuthorities[t]}},{key:"render",value:function(){var e,t=this;if(this.state.query){var a=new RegExp(g()(this.state.query),"i");e=this.props.localAuthorities.map(function(e){return e.label}).filter(function(e){return a.test(e)})}else e=this.props.localAuthorities.map(function(e){return e.label});return o.a.createElement("div",null,o.a.createElement("div",{className:"search search--results-page print--hide",id:"searchBar"},o.a.createElement("div",{className:"wrapper"},o.a.createElement("form",{className:"col-wrap search__form",action:"/search"},o.a.createElement("h1",null,"Find a Region"),o.a.createElement("input",{"aria-label":"search for Local Authorities",className:"search__input search__input--results-page col col--md-29 col--lg-29",id:"nav-search",type:"text",value:this.state.query,onChange:function(e){return t.updateQuery(e.target.value)}}),o.a.createElement("button",{type:"submit",className:"search__button search__button--results-page col--md-3 col--lg-3",id:"nav-search-submit"},o.a.createElement("span",{className:"visuallyhidden"},"Search"),o.a.createElement("span",{className:"icon icon-search--light"}))))),o.a.createElement("div",{className:"wrapper"},o.a.createElement("div",{className:"col-wrap"},o.a.createElement("div",{className:"col col--md-two-thirds col--lg-two-thirds"},o.a.createElement("p",null,"Showing ",e.length," results of ",this.props.localAuthorities.length),e.sort().map(function(e,a){return o.a.createElement("div",{key:a,className:"local-authorities"},o.a.createElement("li",null,e),o.a.createElement("div",{className:"btn-group"},o.a.createElement(E.a,{className:"btn btn--primary",to:{pathname:"/"+e.replace(/\s+/g,"-").toLowerCase(),state:t.addCode(e)}},"Go To"),o.a.createElement("button",{className:"btn btn--secondary",value:e,onClick:function(e){return t.handleAdd(e)}},"Add")))})),o.a.createElement("div",{className:"col col--md-one-third col--lg-one-third"},o.a.createElement("h2",null,"Compare Local Authorities"),this.state.compare.length>0?this.state.compare.map(function(e,a){return o.a.createElement("div",{key:a,className:"compare local-authorities"},o.a.createElement("li",null,e),o.a.createElement("button",{value:e,onClick:function(e){return t.handleRemove(e)}},"Remove"))}):o.a.createElement("p",null,"You have not selected any local authorities yet.")))))}}]),t}(n.Component),j=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=a(146);t.accessToken="pk.eyJ1IjoibWljaGFlbHJveW5vcnRvbiIsImEiOiJjanI5MGs3aWcwMnFvNGFsOWE3NTl2ZWR4In0.wm4DHL_Gb3gGIj7k8VSkgQ";var n=new t.Map({container:"map-container",style:"mapbox://styles/michaelroynorton/cjr932llm00h52tpeao9pjk5u",center:e.props.mapCenter,zoom:8});n.on("load",function(){n.addLayer({id:"maine",type:"fill",source:{type:"geojson",data:{type:"Feature",geometry:{type:"Polygon",coordinates:e.props.polygon}}},layout:{},paint:{"fill-color":"#206095","fill-opacity":.8,"fill-outline-color":"#FF9933"}})})}},{key:"render",value:function(){return o.a.createElement("div",{id:"map-container",className:"map"})}}]),t}(n.Component),N=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={polygon:[],mapCenter:[]},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.places.forEach(function(t){t.attributes.lad18cd===e.props.location.state.id&&e.setState({polygon:t.geometry.rings,mapCenter:[t.attributes.long,t.attributes.lat]})})}},{key:"render",value:function(){return console.log(this.props.places),o.a.createElement("div",null,0!==this.state.polygon.length?o.a.createElement("div",null,o.a.createElement(j,{polygon:this.state.polygon,mapCenter:this.state.mapCenter}),o.a.createElement("div",{className:"region-info"},o.a.createElement("h1",null,this.props.location.state.label))):o.a.createElement("p",null,"Loading map data for ",this.props.location.state.label,"..."))}}]),t}(n.Component),w=a(258),k=a(260),O=(n.Component,function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={localAuthorities:[],places:[]},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("https://api.beta.ons.gov.uk/v1/code-lists/local-authority/editions/2016/codes").then(function(e){return e.json()}).catch(function(e){console.error(e)}).then(function(t){e.setState({localAuthorities:t.items.map(function(e){return{label:e.label,id:e.id}})})}),fetch("https://ons-inspire.esriuk.com/arcgis/rest/services/Administrative_Boundaries/Local_Authority_Districts_May_2018_Boundaries/MapServer/4/query?where=1%3D1&outFields=*&outSR=4326&f=json").then(function(e){return e.json()}).catch(function(e){console.error(e)}).then(function(t){e.setState({places:t.features})})}},{key:"render",value:function(){var e=this;return o.a.createElement(p.a,null,o.a.createElement("div",{className:"App"},o.a.createElement(v,null),o.a.createElement(h.a,null,o.a.createElement(d.a,{exact:!0,path:"/",component:function(){return o.a.createElement(b,{localAuthorities:e.state.localAuthorities})}}),o.a.createElement(d.a,{path:"/:region",render:function(t){return o.a.createElement(N,Object.assign({},t,{places:e.state.places}))}}))))}}]),t}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(o.a.createElement(O,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[135,2,1]]]);
//# sourceMappingURL=main.454b1ccd.chunk.js.map